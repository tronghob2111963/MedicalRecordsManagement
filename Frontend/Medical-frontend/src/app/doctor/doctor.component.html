<div class="doctor-container bg-white shadow-lg rounded-lg p-6 m-4 max-w-7xl mx-auto">
    <div class="header flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6">
        <h2 class="text-2xl font-bold text-gray-800 flex items-center gap-2">
            <span class="text-blue-600">üë®‚Äç‚öïÔ∏è</span>
            Danh s√°ch B√°c sƒ©
        </h2>

        <div class="action-buttons flex flex-col sm:flex-row gap-3 w-full sm:w-auto">
            <!-- N√∫t L√†m m·ªõi -->
            <button
                class="btn-refresh flex items-center justify-center gap-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white px-5 py-2.5 rounded-lg hover:from-blue-600 hover:to-blue-700 transition-all duration-200 transform hover:scale-105 disabled:from-gray-400 disabled:to-gray-500 disabled:cursor-not-allowed disabled:transform-none shadow-md hover:shadow-lg"
                (click)="refresh()" [disabled]="isLoading">
                <span *ngIf="!isLoading" class="text-lg">üîÑ</span>
                <span *ngIf="isLoading" class="text-lg animate-spin">‚è≥</span>
                <span class="font-medium">L√†m m·ªõi</span>
            </button>

            <!-- N√∫t Th√™m b√°c sƒ© -->
            <button
                class="btn btn-refresh"
                [routerLink]="['/create-doctor']">
                <span class="text-lg">‚ûï</span>
                <span class="font-medium">Th√™m b√°c sƒ©</span>
            </button>
        </div>
    </div>

    <!-- Controls -->
    <div class="controls flex flex-wrap gap-6 mb-6">
        <div class="control-group flex items-center gap-2">
            <label for="pageSize" class="text-gray-700 font-medium">Hi·ªÉn th·ªã:</label>
            <select id="pageSize" [(ngModel)]="pageSize" (change)="onPageSizeChange()" [disabled]="isLoading"
                class="border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100">
                <option [value]="5">5 b√°c sƒ©</option>
                <option [value]="10">10 b√°c sƒ©</option>
                <option [value]="20">20 b√°c sƒ©</option>
                <option [value]="50">50 b√°c sƒ©</option>
            </select>
        </div>

        <div class="control-group flex items-center gap-2">
            <label for="sortBy" class="text-gray-700 font-medium">S·∫Øp x·∫øp theo:</label>
            <select id="sortBy" [(ngModel)]="sortBy" (change)="onSortChange()" [disabled]="isLoading"
                class="border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100">
                <option *ngFor="let option of sortOptions" [value]="option.value">
                    {{ option.label }}
                </option>
            </select>
        </div>
    </div>

    <!-- Error Message -->
    <div *ngIf="errorMessage"
        class="error-message bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-lg mb-6">
        <strong class="font-semibold">L·ªói:</strong> {{ errorMessage }}
        <button class="btn-retry ml-4 bg-red-500 text-white px-3 py-1 rounded-lg hover:bg-red-600 transition-colors"
            (click)="refresh()">
            Th·ª≠ l·∫°i
        </button>
    </div>

    <!-- Loading Indicator -->
    <div *ngIf="isLoading" class="loading flex flex-col items-center justify-center py-8">
        <div class="spinner border-t-4 border-blue-500 rounded-full w-8 h-8 animate-spin"></div>
        <p class="mt-2 text-gray-600">ƒêang t·∫£i danh s√°ch b√°c sƒ©...</p>
    </div>

    <!-- Doctor Table -->
    <div *ngIf="!isLoading && !errorMessage" class="table-container overflow-x-auto">
        <table class="doctor-table w-full border-collapse">
            <thead>
                <tr class="bg-gray-100 text-gray-700">
                    <th class="p-3 text-left font-semibold">ID</th>
                    <th class="p-3 text-left font-semibold">H·ªç v√† T√™n</th>
                    <th class="p-3 text-left font-semibold">Chuy√™n khoa</th>
                    <th class="p-3 text-left font-semibold">S·ªë ƒëi·ªán tho·∫°i</th>
                    <th class="p-3 text-left font-semibold">Email</th>
                    <th class="p-3 text-left font-semibold">S·ªë gi·∫•y ph√©p</th>
                    <th class="p-3 text-left font-semibold">Tr·∫°ng th√°i</th>
                    <th class="p-3 text-left font-semibold">Thao t√°c</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let doctor of doctors; trackBy: trackByDoctorId"
                    class="doctor-row border-b hover:bg-gray-50 transition-colors">
                    <td class="p-3">{{ doctor.id }}</td>
                    <td class="doctor-name p-3 font-medium text-gray-800">{{ doctor.full_name }}</td>
                    <td class="p-3">{{ doctor.specialty }}</td>
                    <td class="p-3">
                        <a *ngIf="doctor.phone_number" [href]="'tel:' + doctor.phone_number"
                            class="phone-link text-blue-600 hover:underline">
                            {{ doctor.phone_number }}
                        </a>
                        <span *ngIf="!doctor.phone_number" class="no-data text-gray-500">Ch∆∞a c·∫≠p nh·∫≠t</span>
                    </td>
                    <td class="p-3">
                        <a *ngIf="doctor.email" [href]="'mailto:' + doctor.email"
                            class="email-link text-blue-600 hover:underline">
                            {{ doctor.email }}
                        </a>
                        <span *ngIf="!doctor.email" class="no-data text-gray-500">Ch∆∞a c·∫≠p nh·∫≠t</span>
                    </td>
                    <td class="license-number p-3">{{ doctor.license_Number || 'Ch∆∞a c·∫≠p nh·∫≠t' }}</td>
                    <td class="p-3">
                        <span class="status-badge px-2 py-1 rounded-full text-sm" [ngClass]="{
                                'bg-green-100 text-green-700': doctor.status === 'active',
                                'bg-red-100 text-red-700': doctor.status === 'inactive',
                                'bg-yellow-100 text-yellow-700': doctor.status === 'pending'
                              }">
                            {{ getStatusText(doctor.status) }}
                        </span>
                    </td>
                    <td class="action-buttons p-3 flex gap-2">
                        <!-- N√∫t Chi ti·∫øt - S·ª≠ d·ª•ng click event -->
                        <button
                            class="btn-action btn-view bg-blue-500 text-white px-3 py-1 rounded-lg hover:bg-blue-600 transition-colors"
                            title="Xem chi ti·∫øt" (click)="viewDoctorDetail(doctor.id)">
                            üëÅÔ∏è Chi ti·∫øt
                        </button>

                        <!-- Ho·∫∑c s·ª≠ d·ª•ng routerLink tr·ª±c ti·∫øp -->
                        <!-- <a [routerLink]="['/doctor-detail', doctor.id]"
                           class="btn-action btn-view bg-blue-500 text-white px-3 py-1 rounded-lg hover:bg-blue-600 transition-colors inline-flex items-center"
                           title="Xem chi ti·∫øt">
                            üëÅÔ∏è Chi ti·∫øt
                        </a> -->

                        <button
                            class="btn-action btn-edit bg-yellow-500 text-white px-3 py-1 rounded-lg hover:bg-yellow-600 transition-colors"
                            title="Ch·ªânh s·ª≠a th√¥ng tin" (click)="editDoctor(doctor.id)">
                            ‚úèÔ∏è S·ª≠a
                        </button>
                        <button
                            class="btn-action btn-delete bg-red-500 text-white px-3 py-1 rounded-lg hover:bg-red-600 transition-colors"
                            title="X√≥a b√°c sƒ©" (click)="deleteDoctor(doctor.id, doctor.full_name)">
                            üóëÔ∏è X√≥a
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>

        <!-- Empty State -->
        <div *ngIf="doctors.length === 0" class="empty-state text-center py-8 text-gray-600">
            <p class="text-lg">Kh√¥ng t√¨m th·∫•y b√°c sƒ© n√†o.</p>
        </div>
    </div>

    <!-- Pagination -->
    <div *ngIf="!isLoading && !errorMessage && totalPages > 1"
        class="pagination flex flex-col sm:flex-row justify-between items-center mt-6 gap-4">
        <div class="pagination-info text-gray-600">
            Hi·ªÉn th·ªã {{ ((currentPage - 1) * pageSize) + 1 }} -
            {{ getDisplayedTo() }}
            tr√™n t·ªïng s·ªë {{ totalElements }} b√°c sƒ©
        </div>

        <div class="pagination-controls flex gap-2">
            <button
                class="btn-page bg-gray-100 text-gray-700 px-3 py-1 rounded-lg hover:bg-gray-200 transition-colors disabled:bg-gray-50 disabled:text-gray-400"
                (click)="onPageChange(1)" [disabled]="currentPage === 1">
                ‚èÆÔ∏è ƒê·∫ßu
            </button>
            <button
                class="btn-page bg-gray-100 text-gray-700 px-3 py-1 rounded-lg hover:bg-gray-200 transition-colors disabled:bg-gray-50 disabled:text-gray-400"
                (click)="onPageChange(currentPage - 1)" [disabled]="currentPage === 1">
                ‚¨ÖÔ∏è Tr∆∞·ªõc
            </button>
            <button *ngFor="let page of getPageNumbers()" class="btn-page px-3 py-1 rounded-lg transition-colors"
                [ngClass]="{
                        'bg-blue-500 text-white hover:bg-blue-600': page === currentPage,
                        'bg-gray-100 text-gray-700 hover:bg-gray-200': page !== currentPage
                    }" (click)="onPageChange(page)">
                {{ page }}
            </button>
            <button
                class="btn-page bg-gray-100 text-gray-700 px-3 py-1 rounded-lg hover:bg-gray-200 transition-colors disabled:bg-gray-50 disabled:text-gray-400"
                (click)="onPageChange(currentPage + 1)" [disabled]="currentPage === totalPages">
                Sau ‚û°Ô∏è
            </button>
            <button
                class="btn-page bg-gray-100 text-gray-700 px-3 py-1 rounded-lg hover:bg-gray-200 transition-colors disabled:bg-gray-50 disabled:text-gray-400"
                (click)="onPageChange(totalPages)" [disabled]="currentPage === totalPages">
                Cu·ªëi ‚è≠Ô∏è
            </button>
        </div>
    </div>
</div>